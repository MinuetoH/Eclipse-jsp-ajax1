<!DOCTYPE html>
<!-- /ajax1/src/main/webapp/20221019/ajax1.html -->
<html>
<head>
<meta charset="EUC-KR">
<title>XMLHttpRequest 객체</title>
<script type="text/javascript">
	function loadJsp() {
		/*
		 * new XMLHttpRequest() : ajax 객체. 서버에 요청 후, 응답을 받을 수 있는 
		 *						  기능을 가진 객체.
		 */
		const xhttp = new XMLHttpRequest()
		 //"GET" : 서버에 요청방식 GET 방식으로 설정
		 //"test1.jsp": 요청페이지
		xhttp.open("GET", "test1.jsp")
		xhttp.send()	//서버에 요청
		/*
		 * onreadystatechange : 컬백함수등록 변수
		 * readyState
		 *		0	:	객체 생성
		 *		1	:	open() 실행
		 *		2	:	send() 실행, 
		 *		3	:	응답의 일부만 수신. 응답 중
		 *		4	:	응답 완료
		 * status : Http 응답코드
		 *	 200 : 정상응답
		 *	 400 : 해당 페이지 없음
		 *	 500 : 해당 페이지 오류
		 */
		xhttp.onreadystatechange=function(){
			 //서버의 응답이 정상적으로 완료된 경우
			if(this.readyState=4 && this.status==200) {
				//responseText : 서버의 응답 메세지
				alert(this.responseText)
				document.getElementById("demo").innerHTML=this.responseText
			}
		}
	}
</script>
</head>
<body>
<h2>XMLHttpRequest 객체</h2>
<button type="button" onclick="loadJsp()">요청</button>
<div id="demo">
</div>
</body>
</html>